
{{ form_start(registrationForm, {'attr': {'id': 'registrationMember'}}) }}
  <div class="form-group col-12 mt-3">
    <div class="form-row">
      <div class="form-group col-lg-4 col-md-12 col-sm-12 col-xs-12 ">
        {{ form_label(registrationForm.lastName, 'Nom') }}              
        {{ form_widget (registrationForm.lastName, {'attr': {'class': 'form-control '}}) }}
      </div>
      <div class="form-group col-lg-4 col-md-12 col-sm-12 col-xs-12 ">
        {{ form_label(registrationForm.firstName, 'Prénom') }}              
        {{ form_widget (registrationForm.firstName, {'attr': {'class': 'form-control '}}) }}
      </div>
      <div class="form-group col-lg-4 col-md-12 col-sm-12 col-xs-12 ">
        {{ form_label(registrationForm.dateBirth, 'Date de naissance') }}              
        {{ form_widget (registrationForm.dateBirth, {'attr': {'class': 'form-control '}}) }}
      </div>
    </div>
  </div>
  {# -- #}
   <div class="form-group col-12 mt-3">
    <div class="form-row">
      <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12 ">
        {{ form_label(registrationForm.email, 'Email') }}              
        {{ form_widget (registrationForm.email, {'attr': {'class': 'form-control '}}) }}
      </div>
      <div class="form-group col-lg-6 col-md-12 col-sm-12 col-xs-12 ">
        {{ form_label(registrationForm.plainPassword, 'Mot de passe') }}              
        {{ form_widget (registrationForm.plainPassword, {'attr': {'class': 'form-control '}}) }}
      </div>
    </div>
  </div>
  <button is="registerBbtn"class="btn">ENVOYER</button>
  <div id="divErrorMessage" class="form-error text-danger mt-2 mb-1" ></div>
{{ form_end(registrationForm) }}

          

{# =============================================================================================  #}
 {% block my_js %}
 <script>
    document.getElementById("register_btn").addEventListener("click", function (event) {
        event.preventDefault();
        axios({
            url: '{{ path ("register") }}',
            method: 'POST',
            headers: { 'Content-Type': 'multipart/form-data' },
            data: new FormData(document.getElementById("registerBbtn"))
        })
        .then(function (response) {
                // response.data = objet(array associatif) qui est envoyé dans le controller
                // JsonResponse va transformer l'array en JSON. 
                // Axios transforme le JSON --en--> objet JS
                
                // si erreur
                if (response.data.error != undefined) {
                    divErrorMessage.innerHTML = response.data.error;
                }
                // si pas d'erreur
                else {
                    console.log ('login OK');
                    window.location.href = "{{ path ('home') }}";
                }
                
        })
        .catch(function (error) {
                console.log(error);
        });
    });    
</script>
 {% endblock %}
